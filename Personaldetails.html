<!-- personDetail.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Person Detail</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        .rating-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 20px 0;
        }

        .rating-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .rating-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .rating-btn i {
            font-size: 1.3rem;
        }

        .rating-btn.star {
            background: #fff3cd;
            color: #856404;
        }

        .rating-btn.check {
            background: #d4edda;
            color: #155724;
        }

        .rating-btn.tools {
            background: #fff3cd;
            color: #856404;
        }

        .rating-btn.restart {
            background: #f8d7da;
            color: #721c24;
        }

        .rating-btn.selected {
            transform: scale(0.95);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }

        .rating-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .weekly-report {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .day-report {
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .day-report:last-child {
            border-bottom: none;
        }

        .rating-icon {
            font-size: 1.2rem;
            margin-right: 5px;
        }

        .rating-icon.star { color: #ffd700; }
        .rating-icon.check { color: #28a745; }
        .rating-icon.tools { color: #fd7e14; }
        .rating-icon.restart { color: #dc3545; }
        /* Header Styles */
.main-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: #5a82e7;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    height: 80px;
}

.navbar {
    padding: 0.5rem 1rem;
}

.navbar-brand img {
    max-height: 40px;
    width: auto;
}

.navbar-toggler {
    border: none;
    color: white;
    padding: 0.5rem;
}

.navbar-toggler:focus {
    box-shadow: none;
}

.nav-link {
    color: white !important;
    padding: 0.5rem 1rem;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
}

.nav-link:hover {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
}

.nav-link i {
    font-size: 1.1rem;
}

.dropdown-menu {
    background: white;
    border: none;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
}

.dropdown-item {
    padding: 0.5rem 1rem;
    transition: all 0.3s ease;
}

.dropdown-item:hover {
    background: #f8f9fa;
}

/* Dark theme adjustments */
.dark-theme .main-header {
    background: #1e1e1e;
}

.dark-theme .dropdown-menu {
    background: #2d2d2d;
}

.dark-theme .dropdown-item {
    color: white;
}

.dark-theme .dropdown-item:hover {
    background: #3d3d3d;
}

/* Responsive adjustments */
@media (max-width: 992px) {
    .navbar-collapse {
        background: #5a82e7;
        padding: 1rem;
        border-radius: 0 0 8px 8px;
    }

    .dark-theme .navbar-collapse {
        background: #1e1e1e;
    }
}
/* Footer Styles */
.footer {
    background: linear-gradient(135deg, #5a82e7 0%, #2563eb 100%);
    color: white;
    padding: 40px 0 20px;
    width: 100%;
    margin-left: 0;
    box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.1);
    margin-top: auto;
}

.footer h5 {
    color: white;
    font-weight: bold;
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.footer ul li {
    margin-bottom: 10px;
}

.footer a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    transition: color 0.3s;
}

.footer a:hover {
    color: white;
}

.footer i {
    margin-right: 10px;
}

.footer hr {
    margin: 30px 0;
    border-color: rgba(255, 255, 255, 0.2);
}

.footer .social-icons a {
    background: rgba(255, 255, 255, 0.1);
    width: 35px;
    height: 35px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    margin-left: 10px;
    transition: background 0.3s;
}

.footer .social-icons a:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Dark theme footer */
.dark-theme .footer {
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
}

/* Responsive footer */
@media (max-width: 768px) {
    .footer {
        padding: 20px;
    }
}

.main-content {
    padding-top: 80px;
    min-height: calc(100vh - 60px);
}

.profile-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}

.profile-image {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    object-fit: cover;
    margin: 0 auto 20px;
    display: block;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.dark-theme .profile-container {
    color: white;
}

/* Add these new styles */
.card {
    border: none;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-radius: 15px;
    margin-bottom: 20px;
}

.profile-card {
    background: white;
    height: fit-content;
    margin-top: 20px;
}

.profile-card img {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease;
}

.profile-card img:hover {
    transform: scale(1.05);
}

.card-title {
    color: #2563eb;
    font-weight: 600;
}

/* Dark theme adjustments */
.dark-theme .card {
    background: #2d2d2d;
    color: white;
}

.dark-theme .card-title {
    color: #5a82e7;
}

/* Update existing container styles */
.rating-container {
    margin: 0;
    height: fit-content;
}

.weekly-report {
    margin: 20px 0;
}

@media (max-width: 768px) {
    .profile-card {
        margin-bottom: 20px;
    }
}

.main-content-wrapper {
    margin-top: 120px;
    padding: 20px;
}

@media (max-width: 768px) {
    .main-content-wrapper {
        margin-top: 100px;
    }
}

/* Dark theme styles */
.dark-theme {
    background-color: #1a1a1a;
    color: white;
}

.dark-theme .main-header {
    background: #2d2d2d;
}

.dark-theme .card {
    background: #2d2d2d;
    color: white;
}

.dark-theme .rating-container,
.dark-theme .weekly-report {
    background: #2d2d2d;
    color: white;
}

.dark-theme .dropdown-menu {
    background: #2d2d2d;
    border-color: #3d3d3d;
}

.dark-theme .dropdown-item {
    color: white;
}

.dark-theme .dropdown-item:hover {
    background: #3d3d3d;
    color: white;
}

.dark-theme .modal-content {
    background: #2d2d2d;
    color: white;
}

.dark-theme .modal-header {
    border-bottom-color: #3d3d3d;
}

.dark-theme .btn-close {
    filter: invert(1) grayscale(100%) brightness(200%);
}

.dark-theme .day-report {
    border-bottom-color: #3d3d3d;
}

/* Theme buttons style */
#lightTheme, #darkTheme {
    padding: 10px 20px;
    transition: transform 0.2s;
}

#lightTheme:hover, #darkTheme:hover {
    transform: scale(1.02);
}

.weekly-summary {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-top: 20px;
}

.rating-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 10px;
}

.stat-item i {
    font-size: 1.2rem;
}

.stat-item span {
    font-size: 1.1rem;
}

.custom-alert {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.9);
    background: white;
    padding: 20px 30px;
    border-radius: 10px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    display: none;
    z-index: 1000;
    opacity: 0;
    transition: all 0.3s ease;
    min-width: 300px;
    text-align: center;
}

.custom-alert.show {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
    display: block;
}

.alert-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    color: #333;
}

.alert-content i {
    font-size: 24px;
}

.alert-content span {
    font-size: 16px;
    font-weight: 500;
}

/* Success state */
.custom-alert.success {
    background: #4CAF50;
    color: white;
}

/* Error state */
.custom-alert.error {
    background: #dc3545;
    color: white;
}

/* Dark theme support */
.dark-theme .custom-alert {
    background: #2d2d2d;
    color: white;
}
    </style>
</head>
<body>
    <!-- Add Header -->
    <header class="main-header">
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <!-- Logo -->
                <a class="navbar-brand" href="#">
                    <img src="https://i.postimg.cc/bYWtQRtm/Tekvocation-Logo.png" alt="Tekvocation Logo" height="40">
                </a>

                <!-- Mobile Toggle Button -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                    <i class="fas fa-bars"></i>
                </button>

                <!-- Navigation Items -->
                <div class="collapse navbar-collapse" id="navbarContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="home.html"><i class="fas fa-home"></i> Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html"><i class="fas fa-info-circle"></i> About Us</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="gallery.html"><i class="fas fa-images"></i> Gallery</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-ellipsis-h"></i> More
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="services.html">Services</a></li>
                                <li><a class="dropdown-item" href="projects.html">Projects</a></li>
                                <li><a class="dropdown-item" href="team.html">Team</a></li>
                            </ul>
                        </li>
                    </ul>

                    <!-- Right Side Items -->
                    <div class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#themeModal">
                                <i class="fas fa-cog"></i> Settings
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-user"></i> Account
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#">Profile</a></li>
                                <li><a class="dropdown-item" href="#">Settings</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="signin.html">Logout</a></li>
                            </ul>
                        </li>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <div class="main-content-wrapper">
        <div class="container">
            <div class="row">
                <!-- Profile Card -->
                <div class="col-md-4">
                    <div class="card profile-card">
                        <div class="card-body text-center">
                            <img id="personImage" src="" alt="Person Image" class="rounded-circle mb-3" style="width: 200px; height: 200px; object-fit: cover;">
                            <h3 id="personName" class="card-title"></h3>
                        </div>
                    </div>
                </div>

                <!-- Ratings Card -->
                <div class="col-md-8">
                    <div class="card rating-container">
                        <div class="card-body">
                            <h3 class="card-title mb-4">Rate Performance</h3>
                            <div class="rating-buttons">
                                <button class="rating-btn star" data-rating="star">
                                    <i class="fas fa-star"></i>
                                    Excellence
                                </button>
                                <button class="rating-btn check" data-rating="check">
                                    <i class="fas fa-check-circle"></i>
                                    Complete
                                </button>
                                <button class="rating-btn tools" data-rating="tools">
                                    <i class="fas fa-tools"></i>
                                    In Progress
                                </button>
                                <button class="rating-btn restart" data-rating="restart">
                                    <i class="fas fa-sync-alt"></i>
                                    Restart
                                </button>
                            </div>
                            <button id="submitRating" class="btn btn-primary mt-4">Submit Rating</button>
                        </div>
                    </div>

                    <!-- Weekly Report Card -->
                    <div class="card weekly-report mt-4">
                        <div class="card-body">
                            <h3 class="card-title mb-4">Weekly Report</h3>
                            <div id="weeklyReport"></div>
                            <button id="downloadPDF" class="btn btn-success mt-3">
                                <i class="fas fa-download"></i> Download Report
                            </button>
                        </div>
                    </div>

                    <!-- Weekly Summary Card -->
                    <div class="card weekly-summary mt-4">
                        <div class="card-body">
                            <h3 class="card-title mb-4">Weekly Summary</h3>
                            <div class="rating-stats">
                                <div class="stat-item">
                                    <i class="fas fa-star text-warning"></i>
                                    <span>Excellence: </span>
                                    <span id="starCount">0</span>
                                </div>
                                <div class="stat-item">
                                    <i class="fas fa-check-circle text-success"></i>
                                    <span>Complete: </span>
                                    <span id="checkCount">0</span>
                                </div>
                                <div class="stat-item">
                                    <i class="fas fa-tools text-primary"></i>
                                    <span>In Progress: </span>
                                    <span id="toolsCount">0</span>
                                </div>
                                <div class="stat-item">
                                    <i class="fas fa-sync-alt text-danger"></i>
                                    <span>Restart: </span>
                                    <span id="restartCount">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5>About Tekvocation</h5>
                    <p>Tekvocation is a technology services and training company in Mysore. Our learning solutions aim to unlock potential and accelerate growth. We provide the tools and knowledge to maximize your talent and efficiency, driving measurable value for your organization.</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Services</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Contact Us</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-map-marker-alt"></i> NIKHIL PLAZA, 1310 & 1333, Gaganachumbi Double Rd, near Amruth Gobi (Original, Jayanagar, Kuvempu Nagara, Mysuru, Karnataka 570023, India</li>
                        <li><i class="fas fa-phone"></i> +91 6363410028</li>
                        <li><i class="fas fa-envelope"></i> outreach@tekvocation.com</li>
                    </ul>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-md-6">
                    <p>&copy; <span class="copyright-year">2024</span> Tekvocation. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end social-icons">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Add Theme Modal -->
    <div class="modal fade" id="themeModal" tabindex="-1" aria-labelledby="themeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="themeModalLabel">Select Theme</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <button id="lightTheme" class="btn btn-light w-100 mb-2">Light Theme</button>
                    <button id="darkTheme" class="btn btn-dark w-100">Dark Theme</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Header/Footer JavaScript before your existing script -->
    <script>
        // Header JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Bootstrap components
            const dropdowns = document.querySelectorAll('.dropdown-toggle');
            dropdowns.forEach(dropdown => {
                new bootstrap.Dropdown(dropdown);
            });

            // Mobile menu toggle
            const navbarToggler = document.querySelector('.navbar-toggler');
            const navbarCollapse = document.querySelector('.navbar-collapse');
            
            if (navbarToggler) {
                navbarToggler.addEventListener('click', () => {
                    navbarCollapse.classList.toggle('show');
                });
            }

            // Active link handling
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Theme handling
            const lightTheme = document.getElementById('lightTheme');
            const darkTheme = document.getElementById('darkTheme');
            
            if (lightTheme && darkTheme) {
                lightTheme.addEventListener('click', () => {
                    document.body.classList.remove('dark-theme');
                    localStorage.setItem('theme', 'light');
                    bootstrap.Modal.getInstance(document.getElementById('themeModal')).hide();
                });

                darkTheme.addEventListener('click', () => {
                    document.body.classList.add('dark-theme');
                    localStorage.setItem('theme', 'dark');
                    bootstrap.Modal.getInstance(document.getElementById('themeModal')).hide();
                });

                // Load saved theme
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    document.body.classList.add('dark-theme');
                }
            }

            // Update copyright year
            const yearSpan = document.querySelector('.copyright-year');
            if (yearSpan) {
                yearSpan.textContent = new Date().getFullYear();
            }
        });
    </script>

    <!-- Your existing scripts -->
    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const personName = urlParams.get('name');
        const personImage = urlParams.get('image');

        // Set person details
        document.getElementById('personName').textContent = personName;
        document.getElementById('personImage').src = personImage;

        // Initialize ratings storage
        let weeklyRatings = JSON.parse(localStorage.getItem(`ratings_${personName}`)) || {
            Monday: null,
            Tuesday: null,
            Wednesday: null,
            Thursday: null,
            Friday: null
        };

        // Rating button functionality
        const ratingButtons = document.querySelectorAll('.rating-btn');
        let selectedRating = null;

        ratingButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove selected class from all buttons
                ratingButtons.forEach(btn => btn.classList.remove('selected'));
                // Add selected class to clicked button
                button.classList.add('selected');
                selectedRating = button.dataset.rating;
            });
        });

        // Submit rating
        document.getElementById('submitRating').addEventListener('click', () => {
            if (!selectedRating) {
                showAlert('Please select a rating first', 'error');
                return;
            }

            const today = new Date().toLocaleString('en-us', {weekday:'long'});
            if (weeklyRatings[today] !== undefined) {
                weeklyRatings[today] = selectedRating;
                localStorage.setItem(`ratings_${personName}`, JSON.stringify(weeklyRatings));
                updateWeeklyReport();
                showAlert('Rating submitted successfully!', 'success');
                
                // Reset selection
                ratingButtons.forEach(btn => btn.classList.remove('selected'));
                selectedRating = null;
            } else {
                showAlert('Ratings can only be submitted on weekdays!', 'error');
            }
        });

        // Add this function for custom alerts
        function showAlert(message, type = 'success') {
            const alertEl = document.getElementById('customAlert');
            const messageEl = document.getElementById('alertMessage');
            const iconEl = alertEl.querySelector('i');
            
            // Set message
            messageEl.textContent = message;
            
            // Update icon and color based on type
            if (type === 'error') {
                alertEl.style.background = '#dc3545';
                iconEl.className = 'fas fa-exclamation-circle';
            } else {
                alertEl.style.background = '#4CAF50';
                iconEl.className = 'fas fa-check-circle';
            }
            
            // Show alert
            alertEl.classList.add('show');
            
            // Hide after 3 seconds
            setTimeout(() => {
                alertEl.classList.remove('show');
            }, 3000);
        }

        // Update weekly report
        function updateWeeklyReport() {
            const reportContainer = document.getElementById('weeklyReport');
            reportContainer.innerHTML = '';

            // Get current week's dates
            const dates = getWeekDates();

            Object.entries(weeklyRatings).forEach(([day, rating], index) => {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'day-report';
                
                let ratingHtml = rating ? `
                    <i class="rating-icon ${rating} fas fa-${getRatingIcon(rating)}"></i>
                    ${getRatingLabel(rating)}
                ` : 'Not rated';

                dayDiv.innerHTML = `
                    <strong>${day} (${dates[index]}):</strong>
                    <span>${ratingHtml}</span>
                `;
                reportContainer.appendChild(dayDiv);
            });
        }

        function getRatingIcon(rating) {
            const icons = {
                star: 'star',
                check: 'check-circle',
                tools: 'tools',
                restart: 'sync-alt'
            };
            return icons[rating] || '';
        }

        function getRatingLabel(rating) {
            const labels = {
                star: 'Excellence',
                check: 'Complete',
                tools: 'In Progress',
                restart: 'Restart'
            };
            return labels[rating] || '';
        }

        // Add function to get week dates
        function getWeekDates() {
            const dates = [];
            const curr = new Date();
            const first = curr.getDate() - curr.getDay() + 1; // First day of the week (Monday)
            
            for(let i = 0; i < 5; i++) { // Only weekdays (Monday to Friday)
                const day = new Date(curr.setDate(first + i));
                dates.push(day.toLocaleDateString());
            }
            return dates;
        }

        // Update the PDF generation code
        
            document.getElementById('downloadPDF').addEventListener('click', async function() {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Get the dates for the week
                const dates = getWeekDates();
                const counts = {
                    star: 0,
                    check: 0,
                    tools: 0,
                    restart: 0
                };
                
                // Calculate statistics
                Object.values(weeklyRatings).forEach(rating => {
                    if (rating) counts[rating]++;
                });

                // Set up PDF styling
                doc.setFontSize(22);
                doc.setTextColor(90, 130, 231); // Tekvocation blue color
                doc.text(`Weekly Performance Report`, 20, 30);
                
                doc.setFontSize(16);
                doc.setTextColor(0, 0, 0);
                doc.text(`${personName}`, 20, 45);
                
                // Add week date range
                doc.setFontSize(12);
                doc.setTextColor(100, 100, 100);
                doc.text(`Week: ${dates[0]} to ${dates[4]}`, 20, 60);
                
                // Add horizontal line
                doc.setLineWidth(0.5);
                doc.line(20, 65, 190, 65);

                // Weekly Statistics Section
                doc.setFontSize(16);
                doc.setTextColor(0, 0, 0);
                doc.text('Weekly Performance Summary', 20, 85);

                // Add statistics with icons
                let yPos = 100;
                const statSpacing = 15;

                doc.setFontSize(12);
                
                // Excellence stats with star symbol
                doc.setTextColor(218, 165, 32); // Golden color for star
                doc.text(`★ Excellence`, 30, yPos);
                doc.text(`${counts.star} times this week`, 120, yPos);
                
                // Complete stats with check symbol
                doc.setTextColor(40, 167, 69); // Green color for check
                doc.text(`✓ Complete`, 30, yPos + statSpacing);
                doc.text(`${counts.check} times this week`, 120, yPos + statSpacing);
                
                // In Progress stats with tools symbol
                doc.setTextColor(0, 123, 255); // Blue color for tools
                doc.text(`⚒ In Progress`, 30, yPos + (statSpacing * 2));
                doc.text(`${counts.tools} times this week`, 120, yPos + (statSpacing * 2));
                
                // Restart stats with restart symbol
                doc.setTextColor(220, 53, 69); // Red color for restart
                doc.text(`↻ Restart`, 30, yPos + (statSpacing * 3));
                doc.text(`${counts.restart} times this week`, 120, yPos + (statSpacing * 3));

                // Add horizontal line
                doc.setLineWidth(0.5);
                doc.line(20, yPos + (statSpacing * 4), 190, yPos + (statSpacing * 4));

                // Overall Summary
                const totalRated = Object.values(counts).reduce((a, b) => a + b, 0);
                const totalDays = 5;
                const ratingPercentage = ((totalRated / totalDays) * 100).toFixed(1);

                doc.setTextColor(0, 0, 0);
                doc.setFontSize(14);
                doc.text('Overall Status', 20, yPos + (statSpacing * 5));
                
                doc.setFontSize(12);
                doc.text(`Total Days Rated: ${totalRated} out of ${totalDays} days`, 30, yPos + (statSpacing * 6));
                doc.text(`Completion Rate: ${ratingPercentage}%`, 30, yPos + (statSpacing * 7));

                // Add footer
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 20, 280);
                doc.text('Tekvocation Performance Report', 130, 280);

                // Save the PDF
                const fileName = `${personName}_Weekly_Status_${new Date().toLocaleDateString()}.pdf`;
                doc.save(fileName);
            });


        // Initialize weekly report
        updateWeeklyReport();
    </script>

    <!-- Theme toggle functionality -->
    <script>
        document.getElementById('lightTheme').addEventListener('click', () => {
            document.body.classList.remove('dark-theme');
            localStorage.setItem('theme', 'light');
            const themeModal = bootstrap.Modal.getInstance(document.getElementById('themeModal'));
            themeModal.hide();
        });

        document.getElementById('darkTheme').addEventListener('click', () => {
            document.body.classList.add('dark-theme');
            localStorage.setItem('theme', 'dark');
            const themeModal = bootstrap.Modal.getInstance(document.getElementById('themeModal'));
            themeModal.hide();
        });

        // Check and apply saved theme on page load
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
            }
        });
    </script>

    <!-- Add this before </body> -->
    <div class="custom-alert" id="customAlert">
        <div class="alert-content">
            <i class="fas fa-check-circle"></i>
            <span id="alertMessage">Rating submitted successfully!</span>
        </div>
    </div>
</body>
</html>